plugins {
    id 'java'
}

group = 'com.yourname'   // поменяйте на своё
version = '1.0.0'        // версия мода

java {
    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8
}

repositories {
    mavenCentral()
    maven { url 'https://jitpack.io' } // JitPack — альтернатива недоступному repo.anvilpowered.dev
    // Если хотите оставить оригинальный репозиторий как fallback, можно раскомментировать:
    // maven { url 'https://repo.anvilpowered.dev/maven' }
}

dependencies {
    // Подтянем Mindustry из GitHub через JitPack (tag/release: release-v8)
    implementation 'com.github.Anuken:Mindustry:release-v8'
    // Добавьте другие зависимости модификации при необходимости
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

// Обычный jar (не встраиваем зависимости — моды для Mindustry обычно не бандлят движок в себе)
jar {
    manifest {
        attributes(
            'Implementation-Title': project.name,
            'Implementation-Version': project.version
        )
    }
}

// Простой таск deploy: копирует все jar'ы из build/libs в build/deploy или в указанную папку mods
task deploy(type: Copy) {
    dependsOn assemble
    from("$buildDir/libs") {
        include '*.jar'
    }

    // По умолчанию копируем в build/deploy. Можно задать -PmodsDir=/path/to/Mindustry/mods при запуске
    def targetDir = project.hasProperty('modsDir') ? project.property('modsDir') : "${buildDir}/deploy"
    into targetDir

    doLast {
        println "Deployed to: ${targetDir}"
    }
}
